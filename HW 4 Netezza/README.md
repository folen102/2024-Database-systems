# Знакомство с Netezza

## a. История развития СУБД

[**Netezza**](https://ru.wikipedia.org/wiki/Netezza) – американская компания, разработчик аппаратно-программных комплексов хранилищ данных — кластеров серверов реляционных баз данных, обеспечивающих массово-параллельную обработку, приобретенная IBM в 2010 году. Эта технология изначально разрабатывалась как специализированное решение для аналитики больших данных на аппаратном обеспечении. Система использует архитектуру под названием Asymmetric Massively Parallel Processing (AMPP), которая сочетает в себе высокопроизводительные серверы и дисковые массивы для обработки больших объемов данных.

### IBM и развитие Netezza
IBM приобрела Netezza за 1,7 миллиарда долларов, что стало значительным шагом для IBM в сфере технологий больших данных. Под эгидой IBM, технология Netezza получила значительные инвестиции в разработку и была интегрирована в более широкие продуктовые линейки IBM, направленные на аналитику и облачные вычисления.

### [Версии Netezza](https://en.wikipedia.org/wiki/Netezza)

1. Netezza Performance Server - это название, под которым продукт был перезапущен в рамках IBM Cloud Pak for Data, обеспечивая тесную интеграцию с облачными и гибридными облачными технологиями.
2. Netezza TwinFin - одна из ранних моделей под IBM, которая значительно улучшила производительность и масштабируемость.
3. Netezza Skimmer, Striper и S-Blades - различные улучшения в оборудовании, направленные на увеличение производительности и емкости хранения данных.

На данный момент самая последняя версия — это IBM Netezza Performance Server, анонсированная в 2019 году. Эта версия предлагает продвинутые аналитические возможности, оптимизирована для работы в гибридных и облачных средах и поддерживает интеграцию с различными сервисами и технологиями IBM, такими как Watson и другие инструменты искусственного интеллекта. Это решение предназначено для компаний, которые требуют масштабируемости, высокой производительности и гибкости в обработке больших объемов данных. Система поддерживает все основные языки программирования, включая Python, C, C++, R, Lua и Java. [Ссылка](https://www.ibm.com/products/netezza)


## b.	Инструменты для взаимодействия с СУБД

[Для взаимодействия с СУБД Netezza Performance Server можно использовать следующие инструменты](https://www.ibm.com/docs/en/iis/11.7?topic=8000-client-interfaces-accessing-netezza-performance-server):

1. ODBC-клиент. Позволяет приложениям и инструментам для создания приложений получать доступ к базам данных SQL.
2. Netezza-клиент. Необходим, если нужно загрузить данные в Netezza Performance Server с помощью метода nzload.
3. Web-клиент. Инструмент администратора, основанный на браузере. Позволяет мониторить и администрировать систему Netezza Performance Server из популярных веб-браузеров.
4. Клиент для Linux или Solaris. Позволяет вводить SQL-запросы. Также предоставляет возможность управления системой и базами данных с помощью команд интерфейса командной строки Netezza.
5. Клиент JDBC. Позволяет программам на Java получать доступ к базам данных SQL.


## c. Какой database engine используется в СУБД Netezza?

[Netezza использует специализированный database engine, разработанный для высокопроизводительной обработки и анализа больших объемов данных:](https://en.wikipedia.org/wiki/Netezza)

* **Asymmetric Massively Parallel Processing (AMPP).**
 Netezza использует архитектуру AMPP, которая сочетает в себе высокопроизводительные серверы (хосты) с множеством процессоров и массив дисков. Эта архитектура позволяет эффективно распределять процесс обработки данных между серверами и хранилищами, минимизируя таким образом время обработки за счет параллельного выполнения операций.

* **FPGA (Field-Programmable Gate Array).**
FPGA позволяют выполнение некоторых операций по обработке данных прямо на аппаратном уровне, что значительно ускоряет обработку запросов. FPGA могут быстро фильтровать данные, выполняя операции, такие как предварительная фильтрация строк, прежде чем данные будут переданы на процессоры для дальнейшей обработки. Это снижает объем данных, необходимых для обработки на более высоком уровне, что ускоряет процесс.


## d.	Как устроен язык запросов в вашей СУБД? Разверните БД с данными и выполните ряд запросов. 

Язык запросов в СУБД Netezza основан на SQL, который является стандартным языком для управления и манипуляции реляционными базами данных.

Netezza это аппаратно-программный комплекс, оптимизированный для работы на специализированном оборудовании и к сожалению я не нашел способа развернуть БД на своем ПК. Поэтому я нашел [видео](https://www.youtube.com/watch?v=mpqwtjbImNI), где демонстрируется работа с таблицами. Netezza оперирует классическими SQL запросами. Примеры:

**Создание таблицы:** 
```
CREATE TABLE employees (
    id INTEGER PRIMARY KEY,
    name VARCHAR(100),
    position VARCHAR(100),
    salary DECIMAL(10, 2)
);

```

**Вставка данных:**
```
INSERT INTO employees (id, name, position, salary) VALUES (1, 'John Doe', 'Software Engineer', 90000.00);
INSERT INTO employees (id, name, position, salary) VALUES (2, 'Jane Smith', 'Data Analyst', 85000.00);
INSERT INTO employees (id, name, position, salary) VALUES (3, 'Sam Brown', 'Project Manager', 92000.00);
```
**Выборка данных:**
```
SELECT * FROM employees;
```

**Обновление данных:**
```
UPDATE employees SET salary = salary + 5000 WHERE id = 1;
```

**Удаление данных:**
```
DELETE FROM employees WHERE id = 3;
```

## e.	Распределение файлов БД по разным носителям?

В СУБД Netezza данные распределяются по разным носителям следующим образом:

1. Netezza хранит данные в виде таблиц, которые автоматически распределяются по физическим дискам в системе. Это распределение основано на следующих принципах:

* **Хэш-распределение:** При создании таблицы администратор или система может указать столбец (или столбцы), который будет использоваться для хэш-распределения записей по дискам. Netezza применяет хэш-функцию к значению этого столбца для каждой строки, чтобы определить, на каком диске будет храниться эта строка. Это обеспечивает равномерное и эффективное распределение данных, что важно для параллельной обработки запросов.

* **Репликация зеркал:** Кроме хэш-распределения, Netezza также использует зеркальную репликацию для повышения надежности и доступности данных. Каждый фрагмент данных хранится в двух копиях на разных дисках, что обеспечивает высокую степень устойчивости к отказам

2. Организация данных на дисках.
Данные в Netezza организованы в блоки. Каждый блок данных состоит из нескольких строк, и каждый блок хранится на диске. При обработке запроса система читает только те блоки, которые содержат необходимые данные, что значительно снижает количество операций ввода/вывода и ускоряет обработку запросов.

3. S-Blades и процессоры.
Netezza использует специальные узлы обработки данных, называемые S-Blades, каждый из которых содержит один или несколько процессоров и локальные диски. S-Blades обрабатывают данные параллельно, каждый узел работает с данными, хранящимися на его локальных дисках. Это позволяет минимизировать пересылку данных между узлами и ускорить обработку запросов.

4. Управление данными. Система управления базами данных Netezza автоматически управляет распределением и балансировкой данных по дискам, не требуя от пользователя ручного вмешательства. Это значительно упрощает администрирование системы и позволяет сосредоточиться на аналитике данных.

## f.	На каком языке/ах программирования написана СУБД?

Серверный код IBM Netezza в основном написан на C++. Этот язык программирования используется из-за его эффективности и производительности, которые необходимы для крупномасштабной обработки данных. Кроме того, Netezza использует высокооптимизированный SQL для управления базами данных.

## g.	Какие типы индексов поддерживаются в БД? Приведите пример создания индексов.

Netezza отличается от традиционных реляционных СУБД, таких как Oracle или MySQL, в своем подходе к индексированию данных. Вместо традиционных B-tree и хеш-индексов, Netezza использует концепцию зонирования и организацию данных, которая оптимизирует сканирование таблиц и обеспечивает быструю обработку запросов.

Netezza не поддерживает создание индексов для таблиц. В базе данных Netezza нет необходимости в индексах, поскольку производительность достигается за счет распределения строк данных по нескольким дискам. Netezza отслеживает минимальные/максимальные значения каждого столбца для каждого экстента диска, чтобы игнорировать экстенты, которые не содержат значений, которые ищет запрос. [Ссылка](https://4js.com/online_documentation/fjs-fgl-2.50.02-manual-html/c_fgl_odiagntz_037.html#:~:text=Netezza%C2%AE%20does%20not%20support%20index%20creation%20on%20tables.)

Если отвечать кратко, то у Netezza нет индексов в привычном понимании, вместо этого у нее есть зонные карты.

## h.	Как строится процесс выполнения запросов в вашей СУБД?

IBM Netezza обрабатывает SQL-запросы через несколько ключевых этапов, оптимизированных для быстрой обработки и анализа больших объемов данных:

**1. Подготовка и разбор запроса**

Когда запрос поступает в Netezza, первым делом он проходит этап синтаксического анализа и разбора. В этот момент SQL-запрос проверяется на наличие синтаксических ошибок, а затем преобразуется во внутреннее представление. Этот этап включает разбор запроса и его преобразование в логический план выполнения, который описывает последовательность операций, необходимых для получения результатов.

**2. Оптимизация запроса**

На этом этапе логический план преобразуется в физический план, который определяет, как именно данные будут извлекаться из базы данных. Оптимизатор запросов Netezza анализирует различные стратегии выполнения запроса, учитывая статистику данных, индексы (зонные карты), распределение данных и доступные ресурсы. Цель этого этапа — минимизировать время выполнения запроса и количество обрабатываемых данных.

**3. Выполнение запроса**

После того как оптимизатор выбирает наилучший план выполнения, запрос передается на исполнение. В Netezza данные распределены и обрабатываются параллельно множеством процессоров. Каждый процессор, или S-Blade, обрабатывает данные, которые физически находятся на своих локальных дисках. Это позволяет минимизировать перемещение данных и ускорить обработку запроса.

**4. Агрегация результатов**

После того как каждый процессор обработает свою часть данных, результаты собираются и агрегируются. Этот процесс может включать сортировку, агрегацию или другие операции, необходимые для формирования конечного результата запроса.

**5. Возврат результатов**

Финальный шаг — отправка обработанных данных обратно клиенту. Результаты могут быть представлены в виде таблицы, или же они могут быть использованы для дальнейшей обработки в других запросах или транзакциях.

## i.	Есть ли для вашей СУБД понятие «план запросов»? Если да, объясните, как работает данный этап.

[Ссылка](https://www.iexpertify.com/learn/netezza-query-plan-analysis/)

Как строится и анализируется план запросов:

Генерация и оптимизация плана:
При получении SQL-запроса, Netezza компилирует его и создает несколько потенциальных планов выполнения, каждый из которых предлагает различные стратегии доступа к данным и их обработки. Оптимизатор запросов оценивает каждый план на основе различных метрик, таких как ожидаемое время выполнения и затраты на ресурсы.

Выбор плана:
Из всех возможных планов оптимизатор выбирает наиболее эффективный с точки зрения стоимости. Стоимость рассчитывается с учетом факторов, таких как объем данных, которые нужно прочитать, количество операций ввода-вывода и требуемая вычислительная мощность.

Исполнение плана:
После выбора плана, он отправляется на выполнение. Netezza использует свою мощную массово-параллельную обработку для эффективной реализации плана. Распределенная архитектура Netezza позволяет одновременно обрабатывать запросы на нескольких процессорах, что значительно ускоряет обработку данных.

Анализ плана запросов:
Для анализа и оптимизации запросов в Netezza можно использовать команду EXPLAIN, которая выводит детальный план выбранного запроса. Это включает информацию о путях доступа к данным, операциях соединения и агрегации, а также оценки использования ресурсов. Понимание этих деталей помогает разработчикам оптимизировать SQL-запросы для лучшей производительности.